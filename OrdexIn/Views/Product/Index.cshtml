<!-- file: `OrdexIn/Views/Product/Index.cshtml` -->
@{
    ViewData["Title"] = "Inventario de Productos";
}

<div class="app-card" style="padding:18px; margin-bottom:18px;">
    <h1 class="page-title"><i class = "fa fa-boxes-stacked"></i> Productos</h1>

    <div class="products-actions" role="region" aria-label="Product actions" style="margin-bottom:12px;">
        @if (User.IsInRole("admin"))
        {
            <button id="addProductBtn" class="btn btn-primary"><i class="fa fa-plus-circle"></i> Agregar Producto</button>
            <button id="filterLowStock" class="btn" data-active="0" aria-pressed="false" title="Filtrar productos con stock por debajo del mÃ­nimo" style="margin-left:8px;">
                <i class="fa fa-bell"></i> Mostrar bajo stock
            </button>
        }
        <input id="searchInput" placeholder="ingrese el nombre a buscar..." aria-label="Search products"/>
        <button id="searchBtn" class="btn btn-primary"><i class="fa fa-magnifying-glass"></i> Buscar</button>

        <div style="margin-left:auto;" id="productsMeta" class="products-meta" aria-live="polite">Cargando...</div>
    </div>

    <div class="table-responsive app-table-container app-card" style="padding:12px;">
        <div class="products-pager mt-2" aria-label="Pagination" style="display:flex;align-items:center;gap:8px;margin-top:12px;">
            <button class="pager-prev btn" aria-label="Previous page" disabled><i class="fas fa-arrow-left"></i></button>
            <span class="pager-info">Pagina 1 / 1</span>
            <button class="pager-next btn" aria-label="Next page" disabled><i class="fas fa-arrow-right"></i></button>
        </div>
        <div id="productsTable" aria-live="polite" data-is-admin='@(User.IsInRole("admin") ? "1" : "0")'>
            <table class="products-table" role="table" aria-label="Products">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Precio</th>
                    <th>Stock</th>
                    <th>Stock Minimo</th>
                    <th>Acciones</th>
                </tr>
                </thead>
                <tbody>
                <tr><td colspan="6"><i class="fa fa-clock-four"></i>Cargando productos...</td></tr>
                </tbody>
            </table>
        </div>

        <div class="products-pager mt-2" aria-label="Pagination" style="display:flex;align-items:center;gap:8px;margin-top:12px;">
            <button class="pager-prev btn" aria-label="Previous page" disabled><i class="fas fa-arrow-left"></i></button>
            <span class="pager-info">Pagina 1 / 1</span>
            <button class="pager-next btn" aria-label="Next page" disabled><i class="fas fa-arrow-right"></i></button>
        </div>
    </div>
</div>

@section Scripts {
    <script>window.appBasePath = '@Url.Content("~")';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/7.0.0/signalr.min.js"></script>
    <script src="~/js/product.js" asp-append-version="true"></script>
}
